(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[112],{5578:function(e,r,s){Promise.resolve().then(s.bind(s,3245))},3245:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return u}});var t=s(5444),n=s(9300),i=s(9827),a=s(2422),c=s(1335),o=s(2061),l=s(4385),d=s(9472);function u(){let[e,r]=(0,n.useState)(!1),[s,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),[p,b]=(0,n.useState)(!1),[g,j]=(0,n.useState)(""),[v,N]=(0,n.useState)(null),y=(0,n.useRef)(null);(0,n.useEffect)(()=>{{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){f(!0);let t=new e;t.continuous=!0,t.interimResults=!0,t.lang="en-AU",t.maxAlternatives=1,t.onstart=()=>{console.log("Speech recognition started"),j("")},t.onresult=e=>{let r="",s="";for(let t=e.resultIndex;t<e.results.length;t++){let n=e.results[t][0].transcript;e.results[t].isFinal?r+=n+" ":s+=n}u(r+s)},t.onerror=e=>{console.error("Speech recognition error:",e.error),j(`Speech recognition error: ${e.error}`),r(!1),x(!1)},t.onend=()=>{console.log("Speech recognition ended"),r(!1),s.trim()&&(x(!0),S(s))},y.current=t}else f(!1),console.warn("Speech recognition not supported in this browser")}},[]);let w=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),b(!0),!0}catch(e){return console.error("Microphone permission denied:",e),j("Microphone access is required for voice recording"),b(!1),!1}},S=async e=>{try{let r=await fetch("/api/voice/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voiceText:e,tradeType:"GENERAL"})});if(!r.ok)throw Error("Failed to process voice input");let s=await r.json();console.log("Processed voice data:",s),N(s),x(!1)}catch(e){console.error("Error processing voice input:",e),j("Failed to process voice input. Please try again."),x(!1)}},k=async()=>{if(!h){j("Speech recognition is not supported in this browser");return}if(await w()&&(r(!0),u(""),j(""),N(null),y.current))try{y.current.start()}catch(e){console.error("Failed to start speech recognition:",e),j("Failed to start voice recording"),r(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Voice Recording Test"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Testing TradieTalk voice recording functionality"})]}),(0,t.jsxs)(i.Zb,{className:"mb-6",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 text-blue-600"}),"Voice Recording Status"]})}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)(c.C,{variant:h?"default":"destructive",children:["Speech API: ",h?"Supported":"Not Supported"]})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)(c.C,{variant:p?"default":"secondary",children:["Microphone: ",p?"Granted":"Not Checked"]})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)(c.C,{variant:e?"default":m?"secondary":"outline",children:["Status: ",e?"Recording":m?"Processing":"Ready"]})})]})})]}),(0,t.jsx)(i.Zb,{className:"mb-6",children:(0,t.jsxs)(i.aY,{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 bg-blue-600 rounded-full flex items-center justify-center",children:e?(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)(o.Z,{className:"h-16 w-16 text-white"})}):(0,t.jsx)(l.Z,{className:"h-16 w-16 text-white"})}),m?(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Processing..."}),(0,t.jsx)("p",{className:"text-blue-700 mb-4",children:"Analyzing your voice input using AI"}),(0,t.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),s&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border",children:[(0,t.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"What you said:"}),(0,t.jsxs)("p",{className:"text-blue-700 italic",children:['"',s,'"']})]})]}):e?(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Recording..."}),(0,t.jsx)("p",{className:"text-blue-700 mb-4",children:"Speak clearly about your job requirements"}),s&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border",children:[(0,t.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"Live transcript:"}),(0,t.jsx)("p",{className:"text-blue-700",children:s})]}),(0,t.jsx)("div",{className:"flex justify-center space-x-3",children:(0,t.jsxs)(a.z,{onClick:()=>{y.current&&e&&y.current.stop(),r(!1)},variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Stop Recording"]})})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Ready to Record"}),(0,t.jsx)("p",{className:"text-blue-700 mb-6",children:"Tell me about the job: location, type of work, measurements, and any special requirements."}),g&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 rounded-lg border border-red-200",children:(0,t.jsx)("p",{className:"text-red-700 text-sm",children:g})}),!h&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:(0,t.jsx)("p",{className:"text-amber-700 text-sm",children:"Voice recording is not supported in this browser. Please use Chrome, Edge, or Safari for voice features."})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(a.z,{onClick:k,className:"bg-blue-600 hover:bg-blue-700",disabled:!h,children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),h?"Start Recording":"Recording Unavailable"]}),h&&(0,t.jsx)("div",{className:"text-sm text-blue-600",children:'Example: "I need a quote for a 6 by 4 meter concrete slab for Sarah Johnson\'s backyard in Melbourne"'})]})]})]})}),v&&(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsx)(i.ll,{className:"text-green-600",children:"âœ… Voice Input Processed Successfully!"})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Client Information:"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Name:"})," ",v.clientName||"Not provided"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",v.clientEmail||"Not provided"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Phone:"})," ",v.clientPhone||"Not provided"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Job Details:"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Title:"})," ",v.jobTitle]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Trade:"})," ",v.tradeType]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Location:"})," ",v.location||"Not specified"]})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Description:"}),(0,t.jsx)("p",{className:"text-gray-700",children:v.jobDescription})]}),v.measurements&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Measurements:"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Length:"})," ",v.measurements.length||"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Width:"})," ",v.measurements.width||"N/A"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Area:"})," ",v.measurements.area||"N/A"]})]}),v.materials&&v.materials.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Materials:"}),(0,t.jsx)("ul",{className:"list-disc list-inside",children:v.materials.map((e,r)=>(0,t.jsx)("li",{children:e},r))})]})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("strong",{children:"Original transcript:"}),' "',v.originalText,'"']})})]})]})]})})}},1335:function(e,r,s){"use strict";s.d(r,{C:function(){return c}});var t=s(5444);s(9300);var n=s(2371),i=s(5522);let a=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:r,...s}){return(0,t.jsx)("div",{className:(0,i.cn)(a({variant:r}),e),...s})}},2422:function(e,r,s){"use strict";s.d(r,{z:function(){return l}});var t=s(5444),n=s(9300),i=s(223),a=s(2371),c=s(5522);let o=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef(({className:e,variant:r,size:s,asChild:n=!1,...a},l)=>{let d=n?i.g7:"button";return(0,t.jsx)(d,{className:(0,c.cn)(o({variant:r,size:s,className:e})),ref:l,...a})});l.displayName="Button"},9827:function(e,r,s){"use strict";s.d(r,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return a},aY:function(){return d},ll:function(){return o}});var t=s(5444),n=s(9300),i=s(5522);let a=n.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));a.displayName="Card";let c=n.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));c.displayName="CardHeader";let o=n.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let l=n.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));l.displayName="CardDescription";let d=n.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent",n.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},5522:function(e,r,s){"use strict";s.d(r,{cn:function(){return i}});var t=s(2191),n=s(3607);function i(...e){return(0,n.m6)((0,t.W)(e))}},2061:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(2154).Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},9472:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(2154).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},4385:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(2154).Z)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])}},function(e){e.O(0,[162,386,156,744],function(){return e(e.s=5578)}),_N_E=e.O()}]);