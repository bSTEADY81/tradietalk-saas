(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{9591:function(e,t,s){Promise.resolve().then(s.bind(s,6593))},6593:function(e,t,s){"use strict";s.d(t,{QuoteCreationWizard:function(){return j}});var r=s(5444),a=s(9300),i=s(2670),n=s(9827),l=s(2422),c=s(1335),o=s(2061),d=s(9429),u=s(6771),h=s(3691),x=s(9032),m=s(4385),b=s(9472),p=s(8155),g=s(1084);function j({session:e,method:t="voice"}){let[s,j]=(0,a.useState)(1),[f,v]=(0,a.useState)(!1),[y,N]=(0,a.useState)(t),[w,k]=(0,a.useState)(""),[Z,S]=(0,a.useState)(!1),[M,q]=(0,a.useState)(!1),[C,R]=(0,a.useState)(!1),[z,E]=(0,a.useState)(""),A=(0,a.useRef)(null),T=[{id:"voice",title:"Voice Recording",description:"Speak your quote details",icon:o.Z,color:"bg-blue-500 hover:bg-blue-600",featured:!0},{id:"manual",title:"Manual Entry",description:"Type quote details",icon:d.Z,color:"bg-green-500 hover:bg-green-600",featured:!1},{id:"template",title:"From Template",description:"Use existing template",icon:u.Z,color:"bg-purple-500 hover:bg-purple-600",featured:!1},{id:"photo",title:"Photo First",description:"Add photos then details",icon:h.Z,color:"bg-orange-500 hover:bg-orange-600",featured:!1}],F=[{id:1,title:"Method",description:"Choose input method"},{id:2,title:"Details",description:"Job information"},{id:3,title:"Calculations",description:"Pricing & measurements"},{id:4,title:"Review",description:"Final review"}];(0,a.useEffect)(()=>{{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){q(!0);let t=new e;t.continuous=!0,t.interimResults=!0,t.lang="en-AU",t.maxAlternatives=1,t.onstart=()=>{console.log("Speech recognition started"),E("")},t.onresult=e=>{let t="",s="";for(let r=e.resultIndex;r<e.results.length;r++){let a=e.results[r][0].transcript;e.results[r].isFinal?t+=a+" ":s+=a}k(t+s)},t.onerror=e=>{console.error("Speech recognition error:",e.error),E(`Speech recognition error: ${e.error}`),v(!1),S(!1)},t.onend=()=>{console.log("Speech recognition ended"),v(!1),w.trim()&&(S(!0),H(w))},A.current=t}else q(!1),console.warn("Speech recognition not supported in this browser")}},[]);let P=async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),R(!0),!0}catch(e){return console.error("Microphone permission denied:",e),E("Microphone access is required for voice recording"),R(!1),!1}},H=async e=>{try{let t=await fetch("/api/voice/process",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voiceText:e,tradeType:"GENERAL"})});if(!t.ok)throw Error("Failed to process voice input");let s=await t.json();console.log("Processed voice data:",s),S(!1),j(3)}catch(e){console.error("Error processing voice input:",e),E("Failed to process voice input. Please try again."),S(!1)}},V=async()=>{if(!M){E("Speech recognition is not supported in this browser");return}if(await P()&&(v(!0),k(""),E(""),A.current))try{A.current.start()}catch(e){console.error("Failed to start speech recognition:",e),E("Failed to start voice recording"),v(!1)}},I=()=>{A.current&&f&&A.current.stop(),v(!1)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(i.x,{session:e}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)(g.default,{href:"/dashboard/quotes",children:(0,r.jsxs)(l.z,{variant:"ghost",size:"sm",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Back to Quotes"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Quote"}),(0,r.jsx)("p",{className:"text-gray-600",children:"AI-powered quote creation"})]})]}),(0,r.jsx)(n.Zb,{className:"mb-6",children:(0,r.jsx)(n.aY,{className:"p-4",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:F.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 ${s>=e.id?"bg-blue-600 border-blue-600 text-white":"border-gray-300 text-gray-500"}`,children:e.id}),(0,r.jsxs)("div",{className:"ml-2 hidden sm:block",children:[(0,r.jsx)("div",{className:`text-sm font-medium ${s>=e.id?"text-blue-600":"text-gray-500"}`,children:e.title}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]}),t<F.length-1&&(0,r.jsx)("div",{className:`w-8 h-0.5 mx-4 ${s>e.id?"bg-blue-600":"bg-gray-300"}`})]},e.id))})})}),(0,r.jsx)(n.Zb,{children:(0,r.jsx)(n.aY,{className:"p-6",children:(()=>{switch(s){case 1:return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"How would you like to create your quote?"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Choose the method that works best for you"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:T.map(e=>(0,r.jsxs)(l.z,{variant:y===e.id?"default":"outline",className:`h-32 flex flex-col gap-3 ${y===e.id?e.color:""}`,onClick:()=>N(e.id),children:[(0,r.jsx)(e.icon,{className:"h-8 w-8"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-medium text-base",children:e.title}),(0,r.jsx)("div",{className:"text-sm opacity-80",children:e.description})]}),e.featured&&(0,r.jsx)(c.C,{className:"absolute top-2 right-2 bg-orange-500",children:"Recommended"})]},e.id))}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)(l.z,{onClick:()=>{"voice"===y?V():j(2)},className:"bg-blue-600 hover:bg-blue-700",disabled:!y,children:["voice"===y?"Start Recording":"Continue",(0,r.jsx)(x.Z,{className:"ml-2 h-4 w-4"})]})})]});case 2:if("voice"===y)return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Voice Recording"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Speak clearly about your job requirements"})]}),(0,r.jsx)(n.Zb,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,r.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"w-32 h-32 mx-auto mb-6 bg-blue-600 rounded-full flex items-center justify-center",children:f?(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsx)(o.Z,{className:"h-16 w-16 text-white"})}):(0,r.jsx)(m.Z,{className:"h-16 w-16 text-white"})}),Z?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Processing..."}),(0,r.jsx)("p",{className:"text-blue-700 mb-4",children:"Analyzing your voice input using AI"}),(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto"}),w&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border",children:[(0,r.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"What you said:"}),(0,r.jsxs)("p",{className:"text-blue-700 italic",children:['"',w,'"']})]})]}):f?(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Recording..."}),(0,r.jsx)("p",{className:"text-blue-700 mb-4",children:"Speak clearly about your job requirements"}),w&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border",children:[(0,r.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-1",children:"Live transcript:"}),(0,r.jsx)("p",{className:"text-blue-700",children:w})]}),(0,r.jsx)("div",{className:"flex justify-center space-x-3",children:(0,r.jsxs)(l.z,{onClick:I,variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",children:[(0,r.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Stop Recording"]})})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-blue-900 mb-2",children:"Ready to Record"}),(0,r.jsx)("p",{className:"text-blue-700 mb-6",children:"Tell me about the job: location, type of work, measurements, and any special requirements."}),z&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 rounded-lg border border-red-200",children:(0,r.jsx)("p",{className:"text-red-700 text-sm",children:z})}),!M&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:(0,r.jsx)("p",{className:"text-amber-700 text-sm",children:"Voice recording is not supported in this browser. Please use Chrome, Edge, or Safari for voice features."})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)(l.z,{onClick:V,className:"bg-blue-600 hover:bg-blue-700",disabled:!M,children:[(0,r.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),M?"Start Recording":"Recording Unavailable"]}),M&&(0,r.jsx)("div",{className:"text-sm text-blue-600",children:'Example: "I need a quote for a 6 by 4 meter concrete slab for Sarah Johnson\'s backyard in Melbourne"'}),!M&&(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)(l.z,{onClick:()=>N("manual"),variant:"outline",className:"w-full",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Use Manual Entry Instead"]})})]})]})]})})]});return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Manual Quote Entry"}),(0,r.jsx)("p",{className:"text-gray-600",children:"This feature will be available soon"})]}),(0,r.jsx)(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,r.jsxs)("div",{className:"text-gray-500 mb-4",children:[(0,r.jsx)(u.Z,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Coming Soon"}),(0,r.jsx)("p",{children:"Manual quote entry will be available in the next update."})]}),(0,r.jsx)(l.z,{onClick:()=>N("voice"),variant:"outline",children:"Try Voice Recording Instead"})]})})]});default:return(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Feature in Development"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"This step is being built and will be available soon."}),(0,r.jsx)(g.default,{href:"/dashboard/quotes",children:(0,r.jsx)(l.z,{children:"Back to Quotes"})})]})}})()})})]})]})}},8155:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9032:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},3691:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},6771:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},2061:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},9429:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9472:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},4385:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(2154).Z)("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])}},function(e){e.O(0,[162,558,762,453,166,386,156,744],function(){return e(e.s=9591)}),_N_E=e.O()}]);